<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Python Basic | MutsuGhost1&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Python&#x2019;s Folder Structure
&#x95DC;&#x65BC; yield
yield &#x662F;&#x70BA;&#x4F55;&#x800C;&#x751F; ?
yield &#x7684;&#x5404;&#x7A2E;&#x7528;&#x6CD5;
yield &#x7684;&#x57FA;&#x672C;&#x904B;&#x4F5C;&">
<meta property="og:type" content="article">
<meta property="og:title" content="Python Basic">
<meta property="og:url" content="http://mutsughost1.github.io//2013/09/29/python-basic/">
<meta property="og:site_name" content="MutsuGhost1's Blog">
<meta property="og:description" content="Python&#x2019;s Folder Structure
&#x95DC;&#x65BC; yield
yield &#x662F;&#x70BA;&#x4F55;&#x800C;&#x751F; ?
yield &#x7684;&#x5404;&#x7A2E;&#x7528;&#x6CD5;
yield &#x7684;&#x57FA;&#x672C;&#x904B;&#x4F5C;&">
<meta property="og:image" content="/images/python_install1.PNG">
<meta property="og:image" content="/images/python_install2.PNG">
<meta property="og:image" content="/images/python_map_function.PNG">
<meta property="og:image" content="/images/python_zip_function.PNG">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Python Basic">
<meta name="twitter:description" content="Python&#x2019;s Folder Structure
&#x95DC;&#x65BC; yield
yield &#x662F;&#x70BA;&#x4F55;&#x800C;&#x751F; ?
yield &#x7684;&#x5404;&#x7A2E;&#x7528;&#x6CD5;
yield &#x7684;&#x57FA;&#x672C;&#x904B;&#x4F5C;&">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="http://fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-44446906-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">MutsuGhost1&#39;s Blog</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Pursue excellence, and success will follow, pants down</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/atom.xml">RSS</a>
        
      </nav>
      <nav id="sub-nav">
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><input type="submit" value="&#xF002;" class="search-form-submit"><input type="hidden" name="q" value="site:http://mutsughost1.github.io/"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-python-basic" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2013/09/29/python-basic/" class="article-date">
  <time datetime="2013-09-29T12:45:42.000Z" itemprop="datePublished">9月 29 2013</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Software/">Software</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Python Basic
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <ul>
<li><a href="#python_folder_structure" title="Python&#x27;s Folder Structure">Python&#x2019;s Folder Structure</a></li>
<li><a href="#yield_about" title="&#x95DC;&#x65BC; yield">&#x95DC;&#x65BC; <em>yield</em></a><ul>
<li><a href="#yield_history" title="yield &#x662F;&#x70BA;&#x4F55;&#x800C;&#x751F; ?">yield &#x662F;&#x70BA;&#x4F55;&#x800C;&#x751F; ?</a></li>
<li><a href="#yield_usage" title="yield &#x7684;&#x5404;&#x7A2E;&#x7528;&#x6CD5;">yield &#x7684;&#x5404;&#x7A2E;&#x7528;&#x6CD5;</a><ul>
<li><a href="#yield_fundamental" title="&#x7684;&#x57FA;&#x672C;&#x904B;&#x4F5C;&#x539F;&#x7406;">yield &#x7684;&#x57FA;&#x672C;&#x904B;&#x4F5C;&#x539F;&#x7406;</a></li>
<li><a href="#yield_send" title="send(expression)">send(expression) - pass a value to generator</a></li>
<li><a href="#yield_throw" title="throw">throw(type[,value[,traceback]]) - raise exception inside generator</a></li>
<li><a href="#yield_close" title="close()">close() - terminate the generator</a></li>
<li><a href="#yield_generator_exp" title="generator expression">generator expression - &#x5FEB;&#x901F;&#x7522;&#x751F;&#x4E00;&#x500B; generator object</a></li>
</ul>
</li>
<li><a href="#yield_reference">Reference</a></li>
</ul>
</li>
<li>Python Scope &#x6982;&#x5FF5;</li>
<li><a href="#others" title="&#x5176;&#x4ED6;">&#x5176;&#x4ED6;</a><ul>
<li><a href="http://www.python.org/dev/peps/pep-0202/" title="PEP202" target="_blank" rel="external">List Comprehesion</a> </li>
<li><a href="#lambda_exp" title="Lambda expression">Lambda expression</a></li>
<li><a href="#built_in_map" title="Built-in Funtion map">Built-in Funtion map</a></li>
<li><a href="#built_in_reduce" title="Built-in Funtion reduce">Built-in Funtion reduce</a></li>
<li><a href="#built_in_filter" title="Built-in Funtion filter">Built-in Funtion filter</a></li>
<li><a href="#built_in_zip" title="Built-in Funtion zip">Built-in Funtion zip</a><a id="more"></a>
</li>
</ul>
</li>
</ul>
<hr>
<p><a name="python_folder_structure"></a></p>
<h1 id="Python&#x2019;s_Folder_Structure"><em>Python&#x2019;s Folder Structure</em></h1>
<p>&#x5728;&#x958B;&#x59CB;&#x4F7F;&#x7528; Python &#x4E4B;&#x524D;, &#x5FC5;&#x9808;&#x5148;&#x5728;&#x7CFB;&#x7D71;&#x88DD;<a href="http://www.python.org/getit/" target="_blank" rel="external">&#x5B89;&#x88DD; Python &#x7684;&#x57F7;&#x884C;&#x74B0;&#x5883;</a>, &#x5B89;&#x88DD;&#x5B8C;&#x5F8C;&#x6703;&#x767C;&#x73FE;, &#x9810;&#x8A2D;&#x7684;&#x8CC7;&#x6599;&#x593E;&#x7D50;&#x69CB;&#x5982;&#x4E0B;:</p>
<p><img src="/images/python_install1.PNG" alt=""></p>
<ul>
<li>&#x5728; PythonXX &#x2014;&gt; Lib &#x76EE;&#x9304;&#x4E2D;, &#x53EF;&#x4EE5;&#x770B;&#x5230; Python Built-in Module &#x7684; Source Code  </li>
<li>&#x5728; PythonXX &#x2014;&gt; Lib &#x2014;&gt; site-packages &#x76EE;&#x9304;&#x4E2D;, &#x53EF;&#x4EE5;&#x770B;&#x5230;&#x5B89;&#x88DD;&#x7684; 3rd Party Package</li>
</ul>
<p><img src="/images/python_install2.PNG" alt=""></p>
<hr>
<p><a name="yield_about"></a></p>
<h1 id="&#x95DC;&#x65BC;_yield_&#x7528;&#x6CD5;">&#x95DC;&#x65BC; <em>yield</em> &#x7528;&#x6CD5;</h1>
<p><a name="yield_history"></a></p>
<h2 id="yield_&#x662F;&#x70BA;&#x4F55;&#x800C;&#x751F;_?">yield &#x662F;&#x70BA;&#x4F55;&#x800C;&#x751F; ?</h2>
<p>&#x5728; <a href="http://www.python.org/dev/peps/pep-0255" title="PEP255" target="_blank" rel="external">PEP255</a> &#x4E2D;,&#x6709;&#x4E00;&#x6BB5;&#x8A71;&#x662F;&#x9019;&#x9EBC;&#x63CF;&#x8FF0;&#x7684;  </p>
<blockquote>
<p><em>When a producer function has a hard enough job that it requires<br>maintaining state between values produced, most programming languages<br>offer no pleasant and efficient solution beyond adding a callback<br>function to the producer&#x2019;s argument list, to be called with each value produced</em>  </p>
</blockquote>
<p>&#x7576;&#x4E00;&#x500B;&#x8907;&#x96DC;&#x7684; producer function, &#x70BA;&#x4E86;&#x5728;&#x6BCF;&#x6B21;&#x88AB;&#x547C;&#x53EB;&#x6642;, &#x6B63;&#x78BA;&#x7684; produce &#x51FA;&#x8CC7;&#x6599;, &#x5FC5;&#x9808;&#x5728; producer function<br>&#x5167;&#x5BE6;&#x4F5C;&#x4E00;&#x4E9B;&#x8907;&#x96DC;&#x7684; states &#x4F7F;&#x5F97;&#x8CC7;&#x6599;&#x53EF;&#x4EE5;&#x88AB;&#x6B63;&#x78BA;&#x7522;&#x751F;.  </p>
<p><a href="http://en.wikipedia.org/wiki/Fibonacci_number" title="Fibonacci Series in Wiki" target="_blank" rel="external">&#x4EE5; Fibonacci Series &#x70BA;&#x4F8B;</a></p>
<pre><code><span class="comment"># fib0.py produce &#x51FA; n &#x500B; number &#x7684; fibonacci series</span>
<span class="function"><span class="keyword">def</span> <span class="title">fib0</span><span class="params">(end)</span>:</span>
    a, b = <span class="number">0</span>, <span class="number">1</span>
    <span class="keyword">for</span> i <span class="keyword">in</span> range(end):
        a, b = b, a + b
        <span class="keyword">print</span> <span class="string">&quot;i=&quot;</span>, i, <span class="string">&quot; a=&quot;</span>, a

<span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span>
    fib0(<span class="number">10</span>)

<span class="keyword">if</span> __name__ == <span class="string">&apos;__main__&apos;</span>:
    main()
</code></pre><p>Output:  </p>
<pre><code><span class="setting">i= <span class="value"><span class="number">0</span> a= <span class="number">1</span></span></span>
<span class="setting">i= <span class="value"><span class="number">1</span> a= <span class="number">1</span></span></span>
<span class="setting">i= <span class="value"><span class="number">2</span> a= <span class="number">2</span></span></span>
<span class="setting">i= <span class="value"><span class="number">3</span> a= <span class="number">3</span></span></span>
<span class="setting">i= <span class="value"><span class="number">4</span> a= <span class="number">5</span></span></span>
<span class="setting">i= <span class="value"><span class="number">5</span> a= <span class="number">8</span></span></span>
<span class="setting">i= <span class="value"><span class="number">6</span> a= <span class="number">13</span></span></span>
<span class="setting">i= <span class="value"><span class="number">7</span> a= <span class="number">21</span></span></span>
<span class="setting">i= <span class="value"><span class="number">8</span> a= <span class="number">34</span></span></span>
<span class="setting">i= <span class="value"><span class="number">9</span> a= <span class="number">55</span></span></span>
</code></pre><p>&#x4E0A;&#x8FF0; <strong>fib0.py</strong> &#x7684;&#x505A;&#x6CD5;, &#x53EA;&#x80FD;&#x4E00;&#x6B21; produce &#x51FA;&#x6240;&#x6709;&#x7684; numbers, &#x82E5;&#x8981;&#x505A;&#x6210;&#x6BCF;&#x6B21;&#x547C;&#x53EB;&#x624D; produce &#x51FA; number,<br>&#x5FC5;&#x9808;&#x7531; programmer &#x5B9A;&#x7FA9;&#x984D;&#x5916;&#x7684; states &#x4F86;&#x505A;&#x8655;&#x7406;, &#x985E;&#x4F3C;&#x7684;&#x505A;&#x6CD5;&#x5982;&#x4E0B;:</p>
<pre><code><span class="comment"># fib1.py produce &#x51FA; n &#x500B; number &#x7684; fibonacci series</span>
<span class="comment"># global variable to keep state</span>
fib_state_cur = <span class="number">0</span>
fib_state_end = <span class="number">0</span>
fib_state_a = <span class="number">0</span>
fib_state_b = <span class="number">1</span>
<span class="function"><span class="keyword">def</span> <span class="title">fib1</span><span class="params">(end=-<span class="number">1</span>)</span>:</span>
    <span class="comment"># use global variable to keep state</span>
    <span class="keyword">global</span> fib_state_cur, fib_state_end, fib_state_a, fib_state_b

    <span class="comment"># reset state for each new call</span>
    <span class="keyword">if</span> <span class="number">0</span> &lt; end:
        fib_state_cur = <span class="number">0</span>
        fib_state_end = end
        fib_state_a = <span class="number">0</span>
        fib_state_b = <span class="number">1</span>

    <span class="comment"># restore the state for each call</span>
    start = fib_state_cur
    end = fib_state_end
    a, b = fib_state_a, fib_state_b

    <span class="keyword">for</span> i <span class="keyword">in</span> range(start, end):
        a, b = b, a + b
        <span class="comment"># keep the state</span>
        fib_state_cur = i+<span class="number">1</span>
        fib_state_a, fib_state_b = a, b
        <span class="keyword">return</span> a

<span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span>
    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>):
        <span class="keyword">if</span> <span class="number">0</span> == i:
            <span class="comment"># first time to initialize the number of items</span>
            <span class="keyword">print</span> <span class="string">&quot;i=&quot;</span>, i, <span class="string">&quot;a=&quot;</span>, fib1(<span class="number">10</span>)
        <span class="keyword">else</span>:
            <span class="comment"># get the next number</span>
            <span class="keyword">print</span> <span class="string">&quot;i=&quot;</span>, i, <span class="string">&quot;a=&quot;</span>, fib1()

<span class="keyword">if</span> __name__ == <span class="string">&apos;__main__&apos;</span>:
    main()
</code></pre><p>Output:  </p>
<pre><code><span class="setting">i= <span class="value"><span class="number">0</span> a= <span class="number">1</span></span></span>
<span class="setting">i= <span class="value"><span class="number">1</span> a= <span class="number">1</span></span></span>
<span class="setting">i= <span class="value"><span class="number">2</span> a= <span class="number">2</span></span></span>
<span class="setting">i= <span class="value"><span class="number">3</span> a= <span class="number">3</span></span></span>
<span class="setting">i= <span class="value"><span class="number">4</span> a= <span class="number">5</span></span></span>
<span class="setting">i= <span class="value"><span class="number">5</span> a= <span class="number">8</span></span></span>
<span class="setting">i= <span class="value"><span class="number">6</span> a= <span class="number">13</span></span></span>
<span class="setting">i= <span class="value"><span class="number">7</span> a= <span class="number">21</span></span></span>
<span class="setting">i= <span class="value"><span class="number">8</span> a= <span class="number">34</span></span></span>
<span class="setting">i= <span class="value"><span class="number">9</span> a= <span class="number">55</span></span></span>
</code></pre><p>&#x5927;&#x591A;&#x6578;&#x7684;&#x7A0B;&#x5F0F;&#x8A9E;&#x8A00;, &#x91DD;&#x5C0D;&#x9019;&#x6A23;&#x7684;&#x554F;&#x984C;&#x5728;&#x8A9E;&#x6CD5;&#x4E0A;&#x4E26;&#x6C92;&#x6709;&#x76F4;&#x63A5;&#x7684;&#x652F;&#x63F4;, &#x56E0;&#x6B64;&#x9664;&#x4E86;&#x4E0A;&#x8FF0;&#x7684;&#x505A;&#x6CD5;&#x5916;, &#x5927;&#x591A;&#x6578;&#x6298;&#x8877;&#x7684;&#x505A;&#x6CD5;&#x90FD;&#x662F;&#x63D0;&#x4F9B;<br>callback function &#x7D66;producer function &#x7576;&#x4F5C;&#x53C3;&#x6578;, &#x7576;&#x6BCF;&#x6B21;&#x8CC7;&#x6599;&#x88AB; produce &#x51FA;&#x4F86;&#x6642;, &#x900F;&#x904E; callback function &#x4F86;&#x901A;&#x77E5; consumer.  </p>
<p>&#x70BA;&#x4E86;&#x5C0D;&#x985E;&#x4F3C;&#x7684;&#x9700;&#x6C42;, &#x6709;&#x66F4;&#x597D;&#x7684;&#x652F;&#x63F4;, <a href="http://www.python.org/dev/peps/pep-0255" title="PEP255" target="_blank" rel="external">PEP255</a> &#x88AB;&#x63D0;&#x51FA;&#x4E14;&#x5BE6;&#x73FE;&#x65BC; Python 2.3 &#x4E2D;, &#x5728;&#x521D;&#x7248; <a href="http://www.python.org/dev/peps/pep-0255" title="PEP255" target="_blank" rel="external">PEP255</a> &#x7684;&#x5B9A;&#x7FA9;&#x4E2D;, yield &#x662F;&#x4E00;&#x500B; statement.</p>
<p>&#x900F;&#x904E; yield &#x7684;&#x652F;&#x63F4;, &#x53EF;&#x5C07; <strong>fib1.py</strong> &#x7C21;&#x5316;&#x70BA; <strong>fib2.py</strong>, &#x5982;&#x4E0B;:</p>
<pre><code><span class="function"><span class="keyword">def</span> <span class="title">fib2</span><span class="params">(end)</span>:</span>
    a, b = <span class="number">0</span>, <span class="number">1</span>
    <span class="keyword">for</span> i <span class="keyword">in</span> range(end):
        a, b = b, a + b
        <span class="keyword">yield</span> a

<span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span>
    i = <span class="number">0</span>
    <span class="keyword">for</span> a <span class="keyword">in</span> fib2(<span class="number">10</span>):
        <span class="keyword">print</span> <span class="string">&quot;i=&quot;</span>, i, <span class="string">&quot;a=&quot;</span>, a
        i+=<span class="number">1</span>  
</code></pre><p>Output:  </p>
<pre><code><span class="setting">i= <span class="value"><span class="number">0</span> a= <span class="number">1</span></span></span>
<span class="setting">i= <span class="value"><span class="number">1</span> a= <span class="number">1</span></span></span>
<span class="setting">i= <span class="value"><span class="number">2</span> a= <span class="number">2</span></span></span>
<span class="setting">i= <span class="value"><span class="number">3</span> a= <span class="number">3</span></span></span>
<span class="setting">i= <span class="value"><span class="number">4</span> a= <span class="number">5</span></span></span>
<span class="setting">i= <span class="value"><span class="number">5</span> a= <span class="number">8</span></span></span>
<span class="setting">i= <span class="value"><span class="number">6</span> a= <span class="number">13</span></span></span>
<span class="setting">i= <span class="value"><span class="number">7</span> a= <span class="number">21</span></span></span>
<span class="setting">i= <span class="value"><span class="number">8</span> a= <span class="number">34</span></span></span>
<span class="setting">i= <span class="value"><span class="number">9</span> a= <span class="number">55</span></span></span>
</code></pre><p>&#x5230;&#x4E86; Python 2.5, &#x91DD;&#x5C0D; yield &#x6709;&#x66F4;&#x9032;&#x4E00;&#x6B65;&#x7684; enhancement <a href="http://www.python.org/dev/peps/pep-0342/" title="PEP342" target="_blank" rel="external">PEP342</a>, &#x4F7F;&#x5176;&#x80FD;&#x5920;&#x8F03;&#x5B8C;&#x5584;&#x7684;&#x8655;&#x7406; <a href="http://en.wikipedia.org/wiki/Coroutine#Implementations_for_Python" title="Coroutine in Wiki" target="_blank" rel="external">Coroutine</a> &#x9019;&#x985E;&#x7684;&#x554F;&#x984C;.  </p>
<hr>
<p><a name="yield_usage"></a></p>
<h2 id="yield_&#x7684;&#x5404;&#x7A2E;&#x7528;&#x6CD5;">yield &#x7684;&#x5404;&#x7A2E;&#x7528;&#x6CD5;</h2>
<p>&#x7531;&#x65BC; <a href="http://www.python.org/dev/peps/pep-0342/" title="PEP342" target="_blank" rel="external">PEP342</a> &#x662F;&#x91DD;&#x5C0D; <a href="http://www.python.org/dev/peps/pep-0255" title="PEP255" target="_blank" rel="external">PEP255</a> &#x7684; enhancement, &#x56E0;&#x6B64;&#x4EE5;&#x4E0B;&#x76F4;&#x63A5;&#x91DD;&#x5C0D; <a href="http://www.python.org/dev/peps/pep-0342/" title="PEP342" target="_blank" rel="external">PEP342</a> &#x7684;&#x5404;&#x9805;&#x7528;&#x6CD5;, &#x4E00;&#x4E00;&#x505A;&#x500B;&#x8AAA;&#x660E;.<br><a href="http://www.python.org/dev/peps/pep-0255" title="PEP255" target="_blank" rel="external">PEP255</a> &#x4E2D;, yield &#x662F;&#x4E00;&#x500B; statement.<br><a href="http://www.python.org/dev/peps/pep-0342/" title="PEP342" target="_blank" rel="external">PEP342</a> &#x4E2D;, yield &#x662F;&#x4E00;&#x500B; expression, &#x56E0;&#x6B64;&#x5C07; yield expression &#x7684;&#x56DE;&#x50B3;&#x503C;&#x5FFD;&#x7565;&#x6389;&#x7576;&#x6210; yield statement &#x4F86;&#x8A0E;&#x8AD6;&#x65E2;&#x53EF;.  </p>
<p><a name="yield_fundamental"></a></p>
<h3 id="yield_&#x7684;&#x57FA;&#x672C;&#x904B;&#x4F5C;&#x539F;&#x7406;">yield &#x7684;&#x57FA;&#x672C;&#x904B;&#x4F5C;&#x539F;&#x7406;</h3>
<p>&#x9996;&#x5148;, &#x5148;&#x770B;&#x770B; Python &#x5982;&#x4F55;&#x770B;&#x5F85;&#x4E00;&#x500B;&#x5305;&#x542B;&#x6709; yield &#x8A9E;&#x6CD5;&#x7684; function [1]:</p>
<blockquote>
<p>A function which returns an iterator. It looks like a normal function except that it contains yield statements<br>for producing a series a values usable in a for-loop or that can be retrieved one at a time with the next() function.<br>Each yield temporarily suspends processing, remembering the location execution state<br>(including local variables and pending try-statements).<br>When the generator resumes, it picks-up where it left-off  (in contrast to functions which start fresh on every invocation).  </p>
</blockquote>
<p>&#x4E0A;&#x9762;&#x9019;&#x53E5;&#x8A71;, &#x6211;&#x5011;&#x53EF;&#x4EE5;&#x62C6;&#x6210;&#x5E7E;&#x500B;&#x90E8;&#x4EFD;&#x4F86;&#x7406;&#x89E3;:  </p>
<ol>
<li>&#x7576;&#x4E00;&#x500B; function &#x5167;&#x5305;&#x542B;&#x4E86; yield &#x8A9E;&#x6CD5;, &#x9019;&#x500B; function &#x5C31;&#x7A31;&#x70BA; generator.  </li>
<li>&#x9019;&#x500B; function (generator) &#x88AB;&#x547C;&#x53EB;&#x6642;, &#x56DE;&#x50B3;&#x4E00;&#x500B; iterator (generator object).  </li>
<li>iterator &#x5167;&#x57F7;&#x884C;&#x7684;&#x4EE3;&#x78BC;, &#x65E2;&#x70BA; function &#x5167;&#x5B9A;&#x7FA9;&#x7684;&#x4EE3;&#x78BC;.<br>&#x552F;&#x4E00;&#x7684;&#x5DEE;&#x7570;&#x662F;, &#x6BCF;&#x6B21;&#x547C;&#x53EB; next() &#x90FD;&#x6703;&#x5728; yield expression &#x8655; suspend (&#x5132;&#x5B58;&#x6574;&#x500B; context &#x7684;&#x8B8A;&#x6578;&#x72C0;&#x614B;)<br>&#x4E26;&#x4E14; return &#x5176; yield &#x7684; value &#x7D66; next() &#x7684; caller</li>
<li>&#x6BCF;&#x6B21;&#x547C;&#x53EB; next(), &#x90FD;&#x6703;&#x5F9E;&#x4E0A;&#x4E00;&#x6B21;&#x7D50;&#x675F;&#x7684;&#x5730;&#x65B9; resume (&#x6062;&#x5FA9;&#x6574;&#x500B; context &#x7684;&#x8B8A;&#x6578;&#x72C0;&#x614B;), &#x4E26;&#x7E7C;&#x7E8C;&#x57F7;&#x884C;&#x5230;&#x4E0B;&#x500B; yield &#x8655;</li>
<li>&#x82E5;&#x547C;&#x53EB; next() &#x6642;, &#x4EE3;&#x78BC;&#x4E2D;&#x5DF2;&#x7121; yield expression &#x53EF; suspend, &#x5247;&#x7522;&#x751F; StopIterator Exception  </li>
</ol>
<p>&#x4E0B;&#x9762;&#x7684;&#x4EE3;&#x78BC;, &#x9A57;&#x8B49;&#x4E86;&#x4E0A;&#x8FF0;&#x7684;&#x8AAA;&#x6CD5;:</p>
<pre><code><span class="comment"># generator_demo.py  </span>

<span class="comment"># 1. define a function (generator)</span>
<span class="function"><span class="keyword">def</span> <span class="title">gen</span><span class="params">()</span>:</span>
    x = <span class="number">100</span>              <span class="comment"># &#x7B2C;&#x4E00;&#x6B21;&#x547C;&#x53EB; next() &#x5C07;&#x65BC;&#x6B64;&#x958B;&#x59CB;&#x57F7;&#x884C;</span>
    <span class="keyword">yield</span> x              <span class="comment"># &#x7B2C;&#x4E00;&#x6B21; next() &#x547C;&#x53EB;&#x5F8C;, &#x5C07; suspend &#x65BC;&#x6B64;, &#x4E26;&#x56DE;&#x50B3; x</span>
    x += <span class="number">20</span>              <span class="comment"># &#x7B2C;&#x4E8C;&#x6B21;&#x547C;&#x53EB; next() &#x5C07;&#x65BC;&#x6B64;&#x958B;&#x59CB;&#x57F7;&#x884C;, &#x4FDD;&#x6709;&#x4E0A;&#x6B21;&#x57F7;&#x884C;&#x500B;&#x8B8A;&#x6578;&#x5167;&#x5BB9;&#x7684; context</span>
    <span class="keyword">yield</span> x              <span class="comment"># &#x7B2C;&#x4E8C;&#x6B21; next() &#x547C;&#x53EB;&#x5F8C;, &#x5C07; suspend &#x65BC;&#x6B64;, &#x4E26;&#x56DE;&#x50B3; x</span>
                         <span class="comment"># &#x7B2C;&#x4E09;&#x6B21;&#x547C;&#x53EB; next() &#x5C07;&#x89F8;&#x767C; StopIterator Exception</span>

<span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span>
    <span class="keyword">print</span> type(gen)      <span class="comment"># 1. gen   &#x578B;&#x5225;&#x70BA; &lt;type &apos;function&apos;&gt;, &#x63D0;&#x4F9B;&#x7522;&#x751F; generator(iterator) object</span>
    <span class="keyword">print</span> type(gen())    <span class="comment"># 2. gen() &#x578B;&#x5225;&#x70BA; &lt;type &apos;generator&apos;&gt;</span>
    gen_var = gen()      
    <span class="keyword">print</span> gen_var        <span class="comment"># gen_var &#x70BA;&#x4E00;&#x500B; &lt;generator object gen at 0x00DE8288&gt;</span>
    <span class="keyword">print</span> type(gen_var)  <span class="comment"># gen_var &#x578B;&#x5225;&#x70BA; &lt;type &apos;generator&apos;&gt;</span>
    <span class="keyword">print</span> gen_var.next() <span class="comment"># 3. 100</span>
    <span class="keyword">print</span> gen_var.next() <span class="comment"># 4. 120</span>
    <span class="keyword">print</span> gen_var.next() <span class="comment"># 5. raise StopIteratorException</span>

<span class="keyword">if</span> __name__ == <span class="string">&apos;__main__&apos;</span>:
    main() 
</code></pre><p>Output:  </p>
<pre><code>&lt;<span class="class"><span class="keyword">type</span> &apos;<span class="title">function</span>&apos;&gt;</span>
&lt;<span class="class"><span class="keyword">type</span> &apos;<span class="title">generator</span>&apos;&gt;</span>
&lt;<span class="class"><span class="keyword">type</span> &apos;<span class="title">generator</span>&apos;&gt;</span>
&lt;generator <span class="keyword">object</span> gen at <span class="number">0x00DE82B0</span>&gt;
<span class="number">100</span>
<span class="number">120</span>
Traceback (most recent call last):
  File <span class="string">&quot;&lt;module1&gt;&quot;</span>, line <span class="number">29</span>, <span class="keyword">in</span> &lt;<span class="keyword">module</span>&gt;
  File <span class="string">&quot;&lt;module1&gt;&quot;</span>, line <span class="number">26</span>, <span class="keyword">in</span> main
StopIteration
</code></pre><p>&#x6B78;&#x7D0D;&#x4E0A;&#x8FF0;&#x5E7E;&#x9805;&#x91CD;&#x9EDE;:  </p>
<ul>
<li><strong>yield &#x57FA;&#x672C;&#x4E0A;&#x662F;&#x642D;&#x914D;&#x5728; function &#x5167;&#x90E8;&#x4F7F;&#x7528;&#x7684;</strong></li>
<li>&#x4F7F;&#x7528; yield &#x8A9E;&#x6CD5;&#x7684; function, &#x53C8;&#x7A31;&#x4E4B;&#x70BA; generator</li>
<li>generator &#x6240;&#x7522;&#x751F;&#x7684; generator object &#x662F;&#x4E00;&#x500B; iterator.</li>
<li>generator &#x6BCF;&#x6B21;&#x57F7;&#x884C;&#x7684; next() &#x4EE3;&#x78BC;, &#x5373;&#x70BA; function &#x5167;&#x90E8;&#x7684;&#x4EE3;&#x78BC;, &#x5DEE;&#x5225;&#x5728;&#x65BC;<ul>
<li>next() &#x57F7;&#x884C;&#x5230; yield &#x8655;&#x5373; suspend, &#x4E26;&#x56DE;&#x50B3; yield &#x7684; value &#x7D66; next() caller  </li>
<li>&#x6BCF;&#x6B21;&#x57F7;&#x884C; next() &#x5C07;&#x6703;&#x5F9E;&#x4E0A;&#x6B21; suspend &#x8655;, &#x7E7C;&#x7E8C; resume, &#x4E14;&#x4FDD;&#x6709;&#x4E0A;&#x6B21; context &#x5167;&#x7684;&#x8B8A;&#x6578;&#x72C0;&#x614B;</li>
</ul>
</li>
<li>&#x82E5;&#x547C;&#x53EB; next() &#x6642;, &#x4EE3;&#x78BC;&#x4E2D;&#x5DF2;&#x7121; yield expression &#x53EF; suspend, &#x5247;&#x7522;&#x751F; StopIterator Exception</li>
</ul>
<p><a name="yield_send"></a></p>
<h2 id="send(expression)_-_pass_a_value_to_generator">send(expression) - pass a value to generator</h2>
<p>&#x7406;&#x89E3;&#x5B8C; <a href="#yield_fundamental" title="&#x7684;&#x57FA;&#x672C;&#x904B;&#x4F5C;&#x539F;&#x7406;">yield &#x7684;&#x57FA;&#x672C;&#x904B;&#x4F5C;&#x539F;&#x7406;</a>, &#x5C31;&#x5F88;&#x597D;&#x7406;&#x89E3; send &#x9019;&#x500B; method &#x7684;&#x884C;&#x70BA;.<br>send(expression) &#x548C; next() &#x4E00;&#x6A23;, &#x662F; trigger iterator &#x7684;&#x57F7;&#x884C;, &#x76F4;&#x5230;&#x9047;&#x5230;&#x4E0B;&#x4E00;&#x500B; yield expression.<br>&#x5DEE;&#x7570;&#x5728;&#x65BC;:  </p>
<ul>
<li>send(expression) &#x662F; <a href="http://www.python.org/dev/peps/pep-0342/" title="Coroutines via Enhanced Generators" target="_blank" rel="external">PEP342</a> &#x63D0;&#x51FA;, &#x5728; Python 2.5 &#x5BE6;&#x73FE;, &#x7528;&#x4F86;&#x6307;&#x5B9A; yield expression &#x6240; evaluate &#x7684;&#x7D50;&#x679C;  </li>
<li>&#x9019;&#x4E5F;&#x662F;&#x70BA;&#x4F55;&#x5728; Python 2.5 &#x4E2D;, yield &#x5F9E; statement &#x8B8A;&#x66F4;&#x70BA; expression &#x7684;&#x539F;&#x56E0;&#x4E4B;&#x4E00;</li>
<li>&#x5728; Python 2.3, yield &#x9084;&#x662F;&#x4E00;&#x500B; statement  </li>
</ul>
<p>&#x4E0B;&#x5217;&#x4EE3;&#x78BC;&#x8AAA;&#x660E;&#x4E86;, send(expression) &#x5982;&#x4F55;&#x6307;&#x4EE4; yield expression &#x7684;&#x7D50;&#x679C;.</p>
<pre><code><span class="comment"># generator_send_demo.py</span>

<span class="function"><span class="keyword">def</span> <span class="title">gen2</span><span class="params">()</span>:</span>
    x = <span class="number">100</span>                     <span class="comment"># &#x547C;&#x53EB; next() &#x5C07;&#x65BC;&#x6B64;&#x958B;&#x59CB;&#x57F7;&#x884C;</span>
    y = <span class="keyword">yield</span> x                 <span class="comment"># next() &#x547C;&#x53EB;&#x5F8C;, &#x5C07; suspend &#x65BC;&#x6B64;, &#x4E26;&#x56DE;&#x50B3; x</span>
                                <span class="comment"># &#x547C;&#x53EB; send(10) &#x5C07;&#x65BC;&#x6B64;&#x958B;&#x59CB;&#x57F7;&#x884C;, &#x4FDD;&#x6709;&#x4E0A;&#x6B21;&#x57F7;&#x884C;&#x500B;&#x8B8A;&#x6578;&#x5167;&#x5BB9;&#x7684; context,  </span>
                                <span class="comment"># &#x5C07; send &#x6307;&#x5B9A;&#x7684;&#x503C; assign &#x7D66; y</span>
    x += y                      <span class="comment"># send(10) &#x547C;&#x53EB;&#x5F8C;, &#x57F7;&#x884C;&#x6B64; statement, </span>
    y = <span class="keyword">yield</span> x                 <span class="comment"># send(10) &#x547C;&#x53EB;&#x5F8C;, &#x5C07; suspend &#x65BC;&#x6B64;, &#x4E26;&#x56DE;&#x50B3; x</span>
                                <span class="comment"># &#x547C;&#x53EB; send(20) &#x5C07;&#x65BC;&#x6B64;&#x958B;&#x59CB;&#x57F7;&#x884C;, &#x4FDD;&#x6709;&#x4E0A;&#x6B21;&#x57F7;&#x884C;&#x500B;&#x8B8A;&#x6578;&#x5167;&#x5BB9;&#x7684; context,   </span>
                                <span class="comment"># &#x5C07; send &#x6307;&#x5B9A;&#x7684;&#x503C; assign &#x7D66; y</span>
    x += y                      <span class="comment"># send(20) &#x547C;&#x53EB;&#x5F8C;, &#x57F7;&#x884C; statement,</span>
    <span class="keyword">yield</span> x                     <span class="comment"># send(20) &#x547C;&#x53EB;&#x5F8C;, &#x5C07; suspend &#x65BC;&#x6B64;, &#x4E26;&#x56DE;&#x50B3; x</span>

<span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span>
    gen_var2 = gen2()           <span class="comment"># &#x7522;&#x751F;&#x4E00;&#x500B; generator object &#x5132;&#x5B58;&#x65BC; gen_var2</span>
    <span class="keyword">print</span> gen_var2.next()       <span class="comment"># the same result with calling gen_var2.send(None)</span>
    <span class="keyword">print</span> gen_var2.send(<span class="number">10</span>)     <span class="comment"># &#x57F7;&#x884C; gen_var2.send()</span>
    <span class="keyword">print</span> gen_var2.send(<span class="number">20</span>)     <span class="comment"># &#x57F7;&#x884C; gen_var2.send()</span>
    <span class="keyword">print</span> gen_var2.send(<span class="number">30</span>)     <span class="comment"># the same reslut with calling gen_var2.next(), </span>
                                <span class="comment"># raise StopIterator Exception</span>

<span class="keyword">if</span> __name__ == <span class="string">&apos;__main__&apos;</span>:
    main() 
</code></pre><p>Output:  </p>
<pre><code>100
110
130
Traceback (most recent <span class="operator"><span class="keyword">call</span> <span class="keyword">last</span>):
  File <span class="string">&quot;&lt;module1&gt;&quot;</span>, line <span class="number">49</span>, <span class="keyword">in</span> &lt;<span class="keyword">module</span>&gt;
  File <span class="string">&quot;&lt;module1&gt;&quot;</span>, line <span class="number">35</span>, <span class="keyword">in</span> main
StopIteration</span>
</code></pre><p>&#x9019;&#x908A;&#x88DC;&#x5145;&#x5E7E;&#x500B;&#x91CD;&#x9EDE;:  </p>
<ul>
<li>&#x53EF;&#x5C07; y = yield x &#x770B;&#x6210;&#x53F3;&#x534A;&#x90E8;&#x8DDF;&#x5DE6;&#x534A;&#x90E8;&#x5169;&#x500B;&#x52D5;&#x4F5C;, suspend &#x7684;&#x6642;&#x5019;&#x57F7;&#x884C;&#x53F3;&#x534A;&#x90E8;, resume &#x7684;&#x6642;&#x5019;&#x624D;&#x57F7;&#x884C;&#x5DE6;&#x534A;&#x90E8;&#x7684; assign.  </li>
<li>&#x900F;&#x904E; generator object, &#x7B2C;&#x4E00;&#x6B21;&#x547C; iterate iterator &#x6642;, &#x53EA;&#x80FD;&#x4F7F;&#x7528; next() or send(None), &#x5169;&#x8005;&#x7B49;&#x50F9; </li>
</ul>
<p><a name="yield_throw"></a></p>
<h2 id="throw(type[,value[,traceback]])_-_raise_exception_inside_generator">throw(type[,value[,traceback]]) - raise exception inside generator</h2>
<p><a href="http://www.python.org/dev/peps/pep-0342/" title="Coroutines via Enhanced Generators" target="_blank" rel="external">PEP342</a> &#x63D0;&#x5230;, &#x60F3;&#x5728; generator &#x4E2D;, suspend &#x5728; iterator &#x7684;&#x9EDE;, &#x7522;&#x751F; exception, &#x53EF;&#x4EE5;&#x900F;&#x904E; throw &#x4F86;&#x9054;&#x6210;.  </p>
<p>&#x53C3;&#x8003;&#x4E0B;&#x5217;&#x4EE3;&#x78BC;:  </p>
<pre><code><span class="comment"># generator_throw_demo.py</span>

<span class="function"><span class="keyword">def</span> <span class="title">gen3</span><span class="params">()</span>:</span>
    x = <span class="number">100</span>                              <span class="comment"># &#x547C;&#x53EB; gen_var3.send(None) &#x5C07;&#x7531;&#x6B64;&#x958B;&#x59CB;&#x57F7;&#x884C;</span>
    <span class="keyword">try</span>:
        y = <span class="keyword">yield</span> x                      <span class="comment"># gen_var3.send(None) &#x547C;&#x53EB;&#x5F8C;, &#x5C07; suspend &#x65BC;&#x6B64;, &#x4E26;&#x56DE;&#x50B3; x</span>
                                         <span class="comment"># throw GeneratorExit &#x767C;&#x751F;&#x65BC;&#x6B64;</span>
        x += y
        y = <span class="keyword">yield</span> x
        x += y
        <span class="keyword">yield</span> x
<span class="keyword">except</span>:                                  <span class="comment"># &#x8655;&#x7406;&#x6240;&#x6709;&#x578B;&#x614B;&#x7684; exception, &#x5305;&#x542B; GeneratorExit Exception</span>
    <span class="keyword">pass</span>                                 <span class="comment"># pass GeneratorExit Exception &#x7684;&#x8655;&#x7406;</span>
                                         <span class="comment"># &#x7531;&#x65BC;&#x6C92;&#x6709; yield expression &#x4E86;, </span>
                                         <span class="comment"># &#x56E0;&#x6B64; raise StopIterator Exception</span>

<span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span>
    gen_var3 = gen3()                    <span class="comment"># &#x7522;&#x751F;&#x4E00;&#x500B; generator object &#x5132;&#x5B58;&#x65BC; gen_var3</span>
    <span class="keyword">print</span> gen_var3.send(<span class="keyword">None</span>)            <span class="comment"># the same result with calling gen_var2.next()</span>
    <span class="keyword">print</span> gen_var3.throw(GeneratorExit)  <span class="comment"># &#x5728; generator &#x5167;&#x90E8;&#x7522;&#x751F;&#x4E00;&#x500B; GeneratorExit Exception</span>

<span class="keyword">if</span> __name__ == <span class="string">&apos;__main__&apos;</span>:
    main()
</code></pre><p>Output:  </p>
<pre><code>100
Traceback (most recent <span class="operator"><span class="keyword">call</span> <span class="keyword">last</span>):
  File <span class="string">&quot;&lt;module1&gt;&quot;</span>, line <span class="number">47</span>, <span class="keyword">in</span> &lt;<span class="keyword">module</span>&gt;
  File <span class="string">&quot;&lt;module1&gt;&quot;</span>, line <span class="number">33</span>, <span class="keyword">in</span> main
StopIteration</span>
</code></pre><p>&#x6B64;&#x5916;, &#x7531;&#x5916;&#x90E8; trigger generator &#x5167;&#x7684; exception &#x5F8C;, &#x4ECD;&#x7136;&#x53EF;&#x5728;&#x5167;&#x90E8;&#x7684; exception handler &#x642D;&#x914D; yield &#x7E7C;&#x7E8C;&#x505A;&#x8655;&#x7406;.  </p>
<p>&#x53C3;&#x8003;&#x4E0B;&#x5217;&#x4EE3;&#x78BC;:  </p>
<pre><code><span class="comment"># generator_throw_demo2.py</span>

<span class="function"><span class="keyword">def</span> <span class="title">gen3</span><span class="params">()</span>:</span>
    x = <span class="number">100</span>                               <span class="comment"># &#x7B2C;&#x4E00;&#x6B21; gen_var3.send(None) &#x5C07;&#x7531;&#x6B64;&#x958B;&#x59CB;&#x57F7;&#x884C;</span>
    <span class="keyword">try</span>:
        y = <span class="keyword">yield</span> x                       <span class="comment"># &#x7B2C;&#x4E00;&#x6B21; gen_var3.send(None) &#x547C;&#x53EB;&#x5F8C;, &#x5C07; suspend &#x65BC;&#x6B64;,  </span>
                                          <span class="comment"># &#x4E26;&#x56DE;&#x50B3; x</span>
                                          <span class="comment"># throw GeneratorExit &#x767C;&#x751F;&#x65BC;&#x6B64;</span>
        x += y
        y = <span class="keyword">yield</span> x
        x += y
        <span class="keyword">yield</span> x
<span class="keyword">except</span>:                                   <span class="comment"># &#x8655;&#x7406;&#x6240;&#x6709;&#x578B;&#x614B;&#x7684; exception, &#x5305;&#x542B; GeneratorExit Exception</span>
    x +=<span class="number">10</span>                                <span class="comment"># throw GeneratorExit &#x767C;&#x751F;&#x5F8C;, &#x57F7;&#x884C;&#x6B64; statement </span>
    <span class="keyword">yield</span> x                               <span class="comment"># throw GeneratorExit &#x767C;&#x751F;&#x5F8C;, &#x5C07; suspend &#x65BC;&#x6B64;, &#x4E26;&#x56DE;&#x50B3; x</span>
                                          <span class="comment"># &#x7B2C;&#x4E8C;&#x6B21; gen_var3.send(None) &#x7531;&#x6B64;&#x958B;&#x59CB;&#x57F7;&#x884C;</span>
    x +=<span class="number">20</span>                                <span class="comment"># &#x7B2C;&#x4E8C;&#x6B21; gen_var3.send(None) &#x767C;&#x751F;&#x5F8C;, &#x57F7;&#x884C;&#x6B64; statement</span>
    <span class="keyword">yield</span> x                               <span class="comment"># &#x7B2C;&#x4E8C;&#x6B21; gen_var3.send(None) &#x767C;&#x751F;&#x5F8C;, &#x5C07; suspend &#x65BC;&#x6B64;, </span>
                                          <span class="comment"># &#x4E26;&#x56DE;&#x50B3; x</span>

<span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span>
    gen_var3 = gen3()                     <span class="comment"># &#x7522;&#x751F;&#x4E00;&#x500B; generator object &#x5132;&#x5B58;&#x65BC; gen_var3</span>
    <span class="keyword">print</span> gen_var3.send(<span class="keyword">None</span>)             <span class="comment"># the same result with calling gen_var2.next()</span>
    <span class="keyword">print</span> gen_var3.throw(GeneratorExit)   <span class="comment"># &#x5728; generator &#x5167;&#x90E8;&#x7522;&#x751F;&#x4E00;&#x500B; GeneratorExit Exception</span>
    <span class="keyword">print</span> gen_var3.send(<span class="keyword">None</span>)             <span class="comment"># the same result with calling gen_var2.next()</span>
    <span class="keyword">print</span> gen_var3.send(<span class="keyword">None</span>)             <span class="comment"># the same result with calling gen_var2.next()</span>
</code></pre><p>Output:  </p>
<pre><code>100
110
130
Traceback (most recent <span class="operator"><span class="keyword">call</span> <span class="keyword">last</span>):
  File <span class="string">&quot;&lt;module1&gt;&quot;</span>, line <span class="number">51</span>, <span class="keyword">in</span> &lt;<span class="keyword">module</span>&gt;
  File <span class="string">&quot;&lt;module1&gt;&quot;</span>, line <span class="number">37</span>, <span class="keyword">in</span> main
StopIteration</span>
</code></pre><p><a name="yield_close"></a></p>
<h2 id="close()_-_terminate_the_generator">close() - terminate the generator</h2>
<p><a href="http://www.python.org/dev/peps/pep-0342/" title="Coroutines via Enhanced Generators" target="_blank" rel="external">PEP342</a> &#x63D0;&#x5230;, &#x7576; generator object &#x4E0D;&#x518D;&#x4F7F;&#x7528;&#x6642;, &#x53EF;&#x4EE5;&#x547C;&#x53EB; close() method, &#x4E4B;&#x5F8C;&#x5982;&#x679C;&#x518D;&#x547C;&#x53EB; next() method &#x5247;&#x6703; raise StopIterator Exception.  </p>
<p>&#x53C3;&#x8003;&#x4E0B;&#x9762;&#x4EE3;&#x78BC;:  </p>
<pre><code><span class="comment"># generator_close_demo.py</span>

<span class="function"><span class="keyword">def</span> <span class="title">gen2</span><span class="params">()</span>:</span>
    x = <span class="number">100</span>
    y = <span class="keyword">yield</span> x
    x += y
    y = <span class="keyword">yield</span> x
    x += y
    <span class="keyword">yield</span> x

<span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span>
    gen_var2 = gen2()
    <span class="keyword">print</span> gen_var2.send(<span class="keyword">None</span>)
    gen_var2.close()
    <span class="keyword">print</span> gen_var2.send(<span class="number">10</span>)     <span class="comment"># raise StopIterator Exception, if next() is called after close()</span>
    <span class="keyword">print</span> gen_var2.send(<span class="number">20</span>)

<span class="keyword">if</span> __name__ == <span class="string">&apos;__main__&apos;</span>:
    main()
</code></pre><p>Output:</p>
<pre><code>100
Traceback (most recent <span class="operator"><span class="keyword">call</span> <span class="keyword">last</span>):
  File <span class="string">&quot;&lt;module1&gt;&quot;</span>, line <span class="number">46</span>, <span class="keyword">in</span> &lt;<span class="keyword">module</span>&gt;
  File <span class="string">&quot;&lt;module1&gt;&quot;</span>, line <span class="number">31</span>, <span class="keyword">in</span> main
StopIteration</span>
</code></pre><p><a name="yield_generator_exp"></a></p>
<h2 id="generator_expression_-_&#x5FEB;&#x901F;&#x7522;&#x751F;&#x4E00;&#x500B;_generator_object">generator expression - &#x5FEB;&#x901F;&#x7522;&#x751F;&#x4E00;&#x500B; generator object</h2>
<p>&#x9664;&#x4E86;&#x900F;&#x904E;&#x5B9A;&#x7FA9;&#x5305;&#x542B; yield expression &#x7684; function &#x5916;, &#x53EF;&#x4EE5;&#x900F;&#x904E; Python &#x8A9E;&#x6CD5;&#x5FEB;&#x901F;&#x7684;&#x7522;&#x751F; generator object.<br>&#x5F15;&#x8FF0; <a href="http://docs.python.org/2.7/glossary.html#term-generator" title="generator expression" target="_blank" rel="external">Python Glossary</a> &#x7684;&#x5B9A;&#x7FA9;:</p>
<blockquote>
<p>An expression that returns an iterator. It looks like a normal expression followed by a for expression defining a loop variable, range, and an optional if expression</p>
</blockquote>
<p>&#x7BC4;&#x4F8B;&#x5982;&#x4E0B;:</p>
<pre><code><span class="comment"># generator_expression_demo.py</span>

<span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span>
    gen_exp = ((i+<span class="number">1</span>)*(i+<span class="number">1</span>) <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>))  <span class="comment"># &#x7522;&#x751F;&#x4E00;&#x500B; generator object</span>

    <span class="keyword">print</span> type(gen_exp)
    <span class="keyword">print</span> gen_exp                               <span class="comment"># &#x548C; generator &#x7522;&#x751F;&#x51FA;&#x4F86;&#x7684; object &#x5370;&#x51FA;&#x4F86;&#x7684;&#x8CC7;&#x8A0A;&#x4E0D;&#x592A;&#x4E00;&#x6A23;</span>

    <span class="keyword">for</span> x <span class="keyword">in</span> gen_exp:
        <span class="keyword">print</span> x

<span class="keyword">if</span> __name__ == <span class="string">&apos;__main__&apos;</span>:
    main()
</code></pre><p>Output:</p>
<pre><code>&lt;<span class="keyword">type</span> <span class="string">&apos;generator&apos;</span>&gt;
&lt;generator <span class="class"><span class="keyword">object</span> &lt;<span class="title">genexpr</span>&gt; <span class="title">at</span> 0<span class="title">x00DE82B0</span>&gt;</span>
<span class="number">1</span>
<span class="number">4</span>
<span class="number">9</span>
<span class="number">16</span>
<span class="number">25</span>
<span class="number">36</span>
<span class="number">49</span>
<span class="number">64</span>
<span class="number">81</span>
<span class="number">100</span>
</code></pre><p>&#x9019;&#x88E1;&#x6709;&#x4E00;&#x9EDE;&#x8981;&#x6CE8;&#x610F;, generator expression &#x7522;&#x751F;&#x51FA;&#x4F86;&#x7684; object &#x8207; generator &#x7522;&#x751F;&#x51FA;&#x4F86;&#x7684; object print &#x51FA;&#x4F86;&#x7684;&#x7D50;&#x679C;&#x6709;&#x4E9B;&#x4E0D;&#x540C;.  </p>
<ul>
<li>print generator expression &#x7522;&#x751F;&#x7684; object &#x6703;&#x5370;&#x51FA; &lt;generator object <strong>&lt;genexpr&gt;</strong> at 0x00DE82B0&gt;</li>
<li>print generator &#x7522;&#x751F;&#x7684; object &#x6703;&#x5370;&#x51FA; &lt;generator object <strong>gen</strong> at 0x00DE82B0&gt;</li>
</ul>
<p><a name="yield_reference"></a></p>
<h2 id="Reference:">Reference:</h2>
<ul>
<li>[1] <a href="http://docs.python.org/2.7/glossary.html#term-generator" target="_blank" rel="external">Definition for generator in python</a></li>
<li>[2] <a href="http://blog.donews.com/limodou/archive/2006/09/04/1028747.aspx" target="_blank" rel="external">limodou&#x7684;&#x5B66;&#x4E60;&#x8BB0;&#x5F55;</a></li>
<li>[3] <a href="http://dhcmrlchtdj.github.io/sia/post/2012-11-20/python_yield.html" target="_blank" rel="external">python yield &#x7814;&#x7A76;</a></li>
<li>[4] <a href="http://www.python.org/dev/peps/pep-0255/" title="Simple Generators" target="_blank" rel="external">PEP255</a></li>
<li>[5] <a href="http://www.python.org/dev/peps/pep-0289/" title="Generator Expressions" target="_blank" rel="external">PEP289</a></li>
<li>[6] <a href="http://www.python.org/dev/peps/pep-0342/" title="Coroutines via Enhanced Generators" target="_blank" rel="external">PEP342</a></li>
<li>[7] <a href="http://www.jb51.net/article/15717.htm" target="_blank" rel="external">Python &#x6DF1;&#x5165;&#x7406;&#x89E3;yield</a></li>
</ul>
<hr>
<p><a name="others"></a></p>
<h1 id="&#x5176;&#x5B83;"><em>&#x5176;&#x5B83;</em></h1>
<p><a name="lambda_exp"></a></p>
<h2 id="Lambda_Expression">Lambda Expression</h2>
<p>Python &#x4E2D;&#x4F7F;&#x7528; Lambda Expression &#x7684;&#x8A9E;&#x6CD5;&#x53EF;&#x4EE5;&#x4E00;&#x500B;&#x5EFA;&#x7ACB; Annonymous Function </p>
<p>Ex:</p>
<pre><code>f = <span class="keyword">lambda</span> x: x ** x
print(f(<span class="number">1</span>))
print(f(<span class="number">2</span>))
print(f(<span class="number">3</span>))
print(f(<span class="number">4</span>))
print(f(<span class="number">5</span>))

g = <span class="keyword">lambda</span> x, y: x * y
print(g(<span class="number">1</span>, <span class="number">6</span>))
print(g(<span class="number">2</span>, <span class="number">7</span>))
print(g(<span class="number">3</span>, <span class="number">8</span>))
print(g(<span class="number">4</span>, <span class="number">9</span>))
print(g(<span class="number">5</span>, <span class="number">10</span>))
</code></pre><p>Output:</p>
<pre><code>1
4
27
256
3125
6
14
24
36
50
</code></pre><p><a name="built_in_map"></a></p>
<h2 id="Built-in_Function_map">Built-in Function map</h2>
<p>&#x5728;&#x63A2;&#x8A0E; map function &#x4E4B;&#x524D;, &#x8B93;&#x6211;&#x5011;&#x5148;&#x56DE;&#x61B6;&#x4E00;&#x4E0B;&#x570B;&#x4E2D;&#x6642;&#x5019;&#x5B78;&#x904E;&#x7684;&#x6578;&#x5B78;&#x51FD;&#x6578;,<br>&#x5047;&#x8A2D;&#x51FD;&#x6578; f(x,y,..,z) &#x8F38;&#x5165;&#x4E00;&#x7D44; x1, y1, &#x2026;, z1 &#x53C3;&#x6578;&#x5F8C;, &#x53EF;&#x5F97;&#x5230;&#x4E00;&#x500B;&#x7D50;&#x679C; r1,<br>&#x73FE;&#x5728;&#x6211;&#x5011;&#x6E96;&#x5099; n &#x7D44;&#x8CC7;&#x6599; [(x1, y1, &#x2026;, z1), (x2, y2, &#x2026;, z2), &#x2026;, (xn, yn, &#x2026;, zn)]<br>&#x4F9D;&#x5E8F;&#x8F38;&#x5165;&#x7D66;&#x51FD;&#x6578; f(x,y,&#x2026;,z) &#x5F8C;,<br>&#x53EF;&#x5F97;&#x5230; n &#x500B;&#x7D50;&#x679C; [r1,r2, &#x2026;, rn], &#x5982;&#x4E0B;&#x5716;&#x6240;&#x793A;:</p>
<p><img src="/images/python_map_function.PNG" alt=""></p>
<p>&#x4E8B;&#x5BE6;&#x4E0A; map function &#x5C31;&#x662F;&#x57F7;&#x884C;&#x985E;&#x4F3C;&#x9019;&#x6A23;&#x7684;&#x6982;&#x5FF5;. map function &#x6709;&#x5169;&#x7D44; input &#x53C3;&#x6578;:  </p>
<ol>
<li>function (&#x5C0D;&#x61C9;&#x5230;&#x4E0A;&#x8FF0;&#x7684;&#x51FD;&#x6578; f)  </li>
<li>&#x8F38;&#x5165; function &#x7684;&#x53C3;&#x6578;, &#x53C3;&#x6578;&#x500B;&#x6578;&#x5FC5;&#x9808;&#x8207; function &#x53C3;&#x6578;&#x5339;&#x914D;</li>
</ol>
<p>&#x4E0B;&#x5217;&#x4EE3;&#x78BC;&#x5C55;&#x793A; map function &#x7684;&#x4F7F;&#x7528;&#x65B9;&#x6CD5;:</p>
<pre><code><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">(a,b,c)</span>:</span>
    <span class="keyword">return</span> a*b*c

<span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span>
    lista = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]
    listb = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]
    listc = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]
    <span class="keyword">print</span> map(f, lista, listb, listc)
</code></pre><p>Output:  </p>
<pre><code>[<span class="number">1</span>, <span class="number">8</span>, <span class="number">27</span>, <span class="number">64</span>, <span class="number">125</span>, <span class="number">216</span>]
</code></pre><p>&#x6709;&#x4E00;&#x9EDE;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x4E8B;&#x60C5;, &#x7576;&#x53C3;&#x6578;&#x662F;&#x4E00;&#x500B; sequence &#x6642;, <strong>&#x5404;&#x500B; sequence &#x7684;&#x53C3;&#x6578;&#x4E0D;&#x4E00;&#x81F4;, &#x5C07;&#x53D6;&#x6700;&#x9577;&#x7684;&#x70BA;&#x4E3B;, &#x4E0D;&#x8DB3;&#x88DC; None</strong>.<br>&#x6700;&#x5F8C;, &#x9644;&#x4E0A; <a href="http://docs.python.org/2/library/functions.html#map" target="_blank" rel="external">Python &#x6587;&#x4EF6;</a>&#x4E0A;&#x7684;&#x8AAA;&#x660E;:  </p>
<p><em>map(function, iterable, &#x2026;)</em>  </p>
<blockquote>
<p>Apply function to every item of iterable and return a list of the results.<br>If additional iterable arguments are passed, function must take that many arguments and is applied to the items from all iterables in parallel. <strong>If one iterable is shorter than another it is assumed to be extended with None items</strong>. <strong>If function is None, the identity function is assumed</strong>; if there are multiple arguments, map() returns a list consisting of tuples containing the corresponding items from all iterables (a kind of transpose operation). The iterable arguments may be a sequence or any iterable object; <strong>the result is always a list</strong>.</p>
</blockquote>
<p><a name="built_in_reduce"></a></p>
<h2 id="Built-in_Function_reduce">Built-in Function reduce</h2>
<blockquote>
<p>Apply function of two arguments cumulatively to the items of iterable, from left to right, so as to reduce the iterable to a single value</p>
</blockquote>
<p>Reduce &#x7684; Pseudo Code, &#x985E;&#x4F3C;&#x4E0B;&#x9762;&#x9019;&#x500B;&#x7BC4;&#x4F8B;:</p>
<pre><code><span class="function"><span class="keyword">def</span> <span class="title">reduce</span><span class="params">(function, iterable, initializer=None)</span>:</span>
    it = iter(iterable)

    <span class="keyword">if</span> initializer <span class="keyword">is</span> <span class="keyword">None</span>:
    <span class="keyword">try</span>:
        initializer = next(it)
    <span class="keyword">except</span> StopIteration:
        <span class="keyword">raise</span> TypeError(<span class="string">&apos;reduce() of empty sequence with no initial value&apos;</span>)

    accum_value = initializer
    <span class="keyword">for</span> x <span class="keyword">in</span> it:
        accum_value = function(accum_value, x)
    <span class="keyword">return</span> accum_value
</code></pre><p>Ex:  </p>
<ul>
<li>reduce(lambda x, y: x+y, [1, 2, 3, 4, 5]) calculates ((((1+2)+3)+4)+5)</li>
</ul>
<p><a name="built_in_filter"></a></p>
<h2 id="Built-in_Function_filter">Built-in Function filter</h2>
<blockquote>
<p>Construct a list from those elements of iterable for which function returns true. iterable may be either a sequence, a container which supports iteration, or an iterator. If iterable is a string or a tuple, the result also has that type; otherwise it is always a list. I<strong>f function is None, the identity function is assumed</strong>, that is, all elements of iterable that are false are removed.</p>
</blockquote>
<p>Ex:  </p>
<ul>
<li><strong>filter(function, iterable)</strong> is equivalent to <strong>[item for item in iterable if function(item)]</strong></li>
</ul>
<p><a name="built_in_zip"></a></p>
<h2 id="Built-in_Function_zip">Built-in Function zip</h2>
<p>zip function &#x505A;&#x7684;&#x4E8B;&#x60C5;, &#x5982;&#x4E0B;&#x5716;:</p>
<p><img src="/images/python_zip_function.PNG" alt=""></p>
<p>Ex:</p>
<pre><code><span class="prompt">&gt;&gt;&gt; </span>a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]
<span class="prompt">&gt;&gt;&gt; </span>b = [<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]
<span class="prompt">&gt;&gt;&gt; </span>c = [<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>]      <span class="comment"># &#x4EE5;&#x77ED;&#x7684;&#x70BA;&#x4E3B;</span>
<span class="prompt">&gt;&gt;&gt; </span>zipped = zip(a,b)
[(<span class="number">1</span>, <span class="number">4</span>), (<span class="number">2</span>, <span class="number">5</span>), (<span class="number">3</span>, <span class="number">6</span>)]
<span class="prompt">&gt;&gt;&gt; </span>zip(a,c)
[(<span class="number">1</span>, <span class="number">4</span>), (<span class="number">2</span>, <span class="number">5</span>), (<span class="number">3</span>, <span class="number">6</span>)]
<span class="prompt">&gt;&gt;&gt; </span>zip(*zipped)         <span class="comment"># unzip &#x56DE;&#x539F;&#x4F86;&#x6A21;&#x6A23;</span>
[(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>), (<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>)]
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://mutsughost1.github.io/2013/09/29/python-basic/" data-id="xksub1mr1hryjwc6" class="article-share-link">Share</a>
      
        <a href="http://mutsughost1.github.io/2013/09/29/python-basic/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Python/">Python</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Study-Group/">Study Group</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2014/05/18/learning-mockito/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Mockito Basic
        
      </div>
    </a>
  
  
    <a href="/2013/09/29/about-this-blog/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">About This Blog</div>
    </a>
  
</nav>

  
</article>


<section id="comments">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Software/">Software</a><span class="category-list-count">4</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Blog/">Blog</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/">Python</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Software-Testing/">Software Testing</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Study-Group/">Study Group</a><span class="tag-list-count">3</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Blog/" style="font-size: 10.00px;">Blog</a><a href="/tags/Python/" style="font-size: 20.00px;">Python</a><a href="/tags/Software-Testing/" style="font-size: 10.00px;">Software Testing</a><a href="/tags/Study-Group/" style="font-size: 20.00px;">Study Group</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/05">五月 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/09">九月 2013</a><span class="archive-list-count">4</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2014/05/18/learning-mockito/">Mockito Basic</a>
          </li>
        
          <li>
            <a href="/2013/09/29/python-basic/">Python Basic</a>
          </li>
        
          <li>
            <a href="/2013/09/29/about-this-blog/">About This Blog</a>
          </li>
        
          <li>
            <a href="/2013/09/27/python-oop-exception/">Python OOP Exception</a>
          </li>
        
          <li>
            <a href="/2013/09/27/python-module-package/">Python Module Package</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    <div class="widget tag">
  <h3 class="title">最新留言</h3>
  <ul class="entry">
  <script type="text/javascript" src="http://mutsughost1.disqus.com/recent_comments_widget.js?num_items=5&hide_avatars=0&avatar_size=32&excerpt_length=200&hide_mods=0"></script>
  </ul>
</div>

  
    <div class="widget tag">
  <h3 class="title">喃喃自語</h3>
  <ul class="entry">
  <a class="twitter-timeline" height="250" href="https://twitter.com/MutsuGhost1" data-widget-id="384199658408402944">@MutsuGhost1������</a>
  <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
  </ul>
</div>


  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2014 MutsuGhost1<br>
      Powered by <a href="http://zespia.tw/hexo/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/atom.xml" class="mobile-nav-link">RSS</a>
  
</nav>
    
<script>
  var disqus_shortname = 'mutsughost1';
  
  var disqus_url = 'http://mutsughost1.github.io/2013/09/29/python-basic/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//go.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>


<script type="text/javascript" src="/js/script.js"></script>
  </div>
</body>
</html>